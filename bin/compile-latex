#!/usr/bin/env bash
set -e
compile () {
    # compile twise because of references
    (cd $(dirname $1) && pdflatex $(basename $1) -shell-escape -interaction=nonstopmode)
    (cd $(dirname $1) && pdflatex $(basename $1) -shell-escape -interaction=nonstopmode)
    (cd $(dirname $1) && rm *.{aux,log,nav,out,snm,toc})
}

compile $1